# Инструкция: база данных и обновление сайта

## 1. Подключить PostgreSQL в Railway

1. Откройте ваш проект на [railway.app](https://railway.app).
2. Нажмите **«New»** (или **«+»**) в том же проекте, где уже развёрнут сервис **test**.
3. Выберите **«Database»** → **«PostgreSQL»**.
4. Дождитесь создания базы (появится новый сервис с иконкой слона).
5. Откройте сервис **test** (ваш сайт) → вкладка **Variables** (или **Settings → Variables**).
6. Убедитесь, что там есть переменная **`DATABASE_URL`**.  
   Если её нет: откройте сервис **PostgreSQL** → вкладка **Variables** или **Connect** → скопируйте **Postgres Connection URL** (или **DATABASE_URL**). В сервисе **test** нажмите **New Variable** → имя `DATABASE_URL`, значение — вставленный URL → Save.
7. Railway может предложить **«Add reference»** — добавьте ссылку на переменные PostgreSQL, тогда `DATABASE_URL` подставится автоматически. Сохраните.

---

## 2. Обновить код на сервере (залить изменения)

После любых правок в коде на компьютере выполните в папке проекта в терминале:

```powershell
cd C:\Users\Алекснндр\Cursor

git add .
git commit -m "описание изменений"
git push
```

- **`git add .`** — добавляет все изменённые файлы.
- **`git commit -m "..."`** — фиксирует изменения (напишите коротко, что сделали, например: «Подключена БД», «Правка формы»).
- **`git push`** — отправляет код на GitHub.

Railway сам заметит новый коммит и перезапустит деплой (обычно 1–3 минуты). Сайт обновится.

---

## 3. Где смотреть заявки (данные в БД)

- **В браузере:** откройте  
  **`https://ВАШ-ДОМЕН.up.railway.app/api/feedback`**  
  Подставьте ваш реальный адрес с Railway. Увидите список заявок в формате JSON.

- **В Railway:** в сервисе PostgreSQL можно открыть вкладку **Data** (если есть) или использовать внешний клиент по тому же `DATABASE_URL` для просмотра таблицы `feedback`.

---

## 4. Локальный запуск (без Railway)

На своём ПК без `DATABASE_URL` заявки по-прежнему пишутся в файл **feedback.json**. Запуск:

```powershell
npm install
npm start
```

Сайт: **http://localhost:3000**.

---

## Кратко

| Действие | Команды / шаги |
|----------|-----------------|
| Добавить БД в Railway | New → Database → PostgreSQL → в сервисе test указать/подключить `DATABASE_URL` |
| Обновить сайт после правок | `git add .` → `git commit -m "..."` → `git push` |
| Посмотреть заявки | Открыть в браузере: `https://ваш-домен.up.railway.app/api/feedback` |
